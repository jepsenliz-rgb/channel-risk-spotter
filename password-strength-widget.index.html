<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Strength Check - In-House Learning</title>
    <style>
        /* =================================================================
           CONFIG & CSS VARIABLES
        ================================================================= */
        :root {
            --color-dark-neutral: #1C2C4C;
            --color-primary: #1A6EF6;
            --color-cta: #F76C5E;
            --color-background: #FFFFFF;
            --color-border: #E8ECF3;
            --color-background-soft: #F7F9FC;
            --color-success: #1C9E6F;
            --color-warning: #F0A35E;
            --font-family: -apple-system, BlinkMacSystemFont, "Noto Sans", Roboto, Inter, Arial, sans-serif;
        }

        /* =================================================================
           RESET & BASE STYLES
        ================================================================= */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--color-background);
            color: var(--color-dark-neutral);
            line-height: 1.5;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* =================================================================
           CARD LAYOUT
        ================================================================= */
        .widget-card {
            background: var(--color-background);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(28, 44, 76, 0.08);
            padding: 32px;
            width: 100%;
            max-width: 560px;
            border: 1px solid var(--color-border);
        }

        .widget-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .logo {
            max-height: 32px;
            width: auto;
        }

        .widget-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--color-dark-neutral);
        }

        /* =================================================================
           FORM STYLES
        ================================================================= */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: var(--color-dark-neutral);
            margin-bottom: 6px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s ease;
            background: var(--color-background);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(26, 110, 246, 0.1);
        }

        .password-wrapper {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--color-primary);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            padding: 4px;
        }

        .password-toggle:focus {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
            border-radius: 4px;
        }

        /* =================================================================
           BUTTONS
        ================================================================= */
        .btn {
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            font-family: var(--font-family);
        }

        .btn-primary {
            background-color: var(--color-cta);
            color: white;
        }

        .btn-primary:hover {
            background-color: #e55a4c;
        }

        .btn-primary:focus {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        .btn-secondary {
            background-color: var(--color-background-soft);
            color: var(--color-dark-neutral);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            background-color: #edf1f7;
        }

        .btn-secondary:focus {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        .button-group {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        /* =================================================================
           STRENGTH METER
        ================================================================= */
        .strength-meter {
            margin: 20px 0;
        }

        .strength-label {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .strength-bar {
            width: 100%;
            height: 8px;
            background-color: var(--color-border);
            border-radius: 4px;
            overflow: hidden;
        }

        .strength-fill {
            height: 100%;
            transition: width 0.3s ease, background-color 0.3s ease;
            border-radius: 4px;
        }

        .strength-weak { background-color: var(--color-cta); }
        .strength-fair { background-color: var(--color-warning); }
        .strength-good { background-color: var(--color-primary); }
        .strength-strong { background-color: var(--color-success); }

        /* =================================================================
           CHECKLIST
        ================================================================= */
        .requirements-list {
            background: var(--color-background-soft);
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }

        .requirements-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--color-dark-neutral);
        }

        .requirement-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .requirement-item:last-child {
            margin-bottom: 0;
        }

        .requirement-check {
            width: 16px;
            height: 16px;
            border: 2px solid var(--color-border);
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            transition: all 0.2s ease;
        }

        .requirement-check.met {
            background-color: var(--color-success);
            border-color: var(--color-success);
            color: white;
        }

        /* =================================================================
           SUCCESS STATE
        ================================================================= */
        .success-message {
            background: linear-gradient(135deg, rgba(28, 158, 111, 0.1), rgba(28, 158, 111, 0.05));
            border: 1px solid rgba(28, 158, 111, 0.2);
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            display: none;
            align-items: center;
            gap: 12px;
        }

        .success-message.show {
            display: flex;
        }

        .success-icon {
            color: var(--color-success);
            font-size: 20px;
        }

        .success-text {
            color: var(--color-success);
            font-weight: 500;
        }

        /* =================================================================
           TIPS SECTION
        ================================================================= */
        .tips-section {
            background: rgba(26, 110, 246, 0.05);
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }

        .tips-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-primary);
        }

        .tip-text {
            font-size: 14px;
            color: var(--color-dark-neutral);
        }

        /* =================================================================
           EXPANDABLE SECTION
        ================================================================= */
        .expandable {
            margin-top: 20px;
            border-top: 1px solid var(--color-border);
            padding-top: 20px;
        }

        .expandable-trigger {
            background: none;
            border: none;
            color: var(--color-primary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .expandable-trigger:focus {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
            border-radius: 4px;
        }

        .expandable-content {
            display: none;
            margin-top: 12px;
        }

        .expandable-content.show {
            display: block;
        }

        .expandable-content p {
            font-size: 14px;
            margin-bottom: 8px;
        }

        /* =================================================================
           TOAST
        ================================================================= */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--color-dark-neutral);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* =================================================================
           RESPONSIVE
        ================================================================= */
        @media (max-width: 480px) {
            .widget-card {
                padding: 24px;
                margin: 10px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="widget-card">
        <!-- Header -->
        <div class="widget-header">
            <img id="logo" class="logo" alt="In-House Learning" />
            <h1 class="widget-title">Password Strength Check</h1>
        </div>

        <!-- Form -->
        <form id="passwordForm">
            <div class="form-group">
                <label for="name" class="form-label">Name (optional)</label>
                <input type="text" id="name" class="form-input" placeholder="Your name">
            </div>

            <div class="form-group">
                <label for="email" class="form-label">Email (optional)</label>
                <input type="email" id="email" class="form-input" placeholder="your.email@example.com">
            </div>

            <div class="form-group">
                <label for="password" class="form-label">Password</label>
                <div class="password-wrapper">
                    <input type="password" id="password" class="form-input" placeholder="Enter your password" style="padding-right: 60px;">
                    <button type="button" id="togglePassword" class="password-toggle">Show</button>
                </div>
            </div>

            <div class="button-group">
                <button type="button" id="generateBtn" class="btn btn-primary" title="Creates a high-entropy password you can copy">Generate Strong Password</button>
                <button type="button" id="copyBtn" class="btn btn-secondary">Copy</button>
            </div>
        </form>

        <!-- Strength Meter -->
        <div class="strength-meter">
            <div class="strength-label" id="strengthLabel">Enter a password to check its strength</div>
            <div class="strength-bar">
                <div class="strength-fill" id="strengthFill" style="width: 0%;"></div>
            </div>
        </div>

        <!-- Requirements Checklist -->
        <div class="requirements-list">
            <div class="requirements-title">Password Requirements</div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-length">✓</div>
                <span>At least 12 characters</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-lowercase">✓</div>
                <span>At least 1 lowercase letter</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-uppercase">✓</div>
                <span>At least 1 uppercase letter</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-number">✓</div>
                <span>At least 1 number</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-symbol">✓</div>
                <span>At least 1 symbol</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-spaces">✓</div>
                <span>No spaces</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-common">✓</div>
                <span>Not a common password or pattern</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-personal">✓</div>
                <span>Not your name or email</span>
            </div>
            <div class="requirement-item">
                <div class="requirement-check" id="req-repeated">✓</div>
                <span>No 4+ repeated characters</span>
            </div>
        </div>

        <!-- Success Message -->
        <div class="success-message" id="successMessage">
            <span class="success-icon">✓</span>
            <div>
                <div class="success-text">Looks strong. You could use this.</div>
                <div style="font-size: 12px; color: #666; margin-top: 4px;">Remember to store passwords safely in a password manager.</div>
            </div>
        </div>

        <!-- Tips Section -->
        <div class="tips-section" id="tipsSection">
            <div class="tips-title">💡 Pro Tip</div>
            <div class="tip-text" id="tipText">Use a mix of unrelated words with numbers and symbols for memorable strength.</div>
        </div>

        <!-- Expandable Why Section -->
        <div class="expandable">
            <button type="button" class="expandable-trigger" id="whyTrigger">
                Why this matters ▼
            </button>
            <div class="expandable-content" id="whyContent">
                <p><strong>12+ characters:</strong> Exponentially harder to crack with each additional character.</p>
                <p><strong>Mixed case & symbols:</strong> Increases the possible character combinations dramatically.</p>
                <p><strong>No common passwords:</strong> Prevents attacks using known password lists.</p>
                <p><strong>No personal info:</strong> Attackers often try combinations of your known information.</p>
                <p><strong>No patterns:</strong> Keyboard sequences and repeated characters are easily guessed.</p>
            </div>
        </div>
    </div>

    <!-- Toast for copy feedback -->
    <div class="toast" id="toast"></div>

    <script>
        // =================================================================
        // CONFIG
        // =================================================================
        const logoSrc = '/lovable-uploads/87ff2875-438d-47fc-b2b6-f9eb57a6a191.png'; // Replace with actual logo URL

        // Common passwords and patterns (small denylist)
        const commonPasswords = [
            'password', '123456', 'qwerty', 'iloveyou', 'admin', 'welcome', 
            'letmein', 'football', 'monkey', 'abc123', 'passw0rd!', 'password123',
            '12345678', '123456789', 'qwerty123', 'password1', 'welcome123'
        ];

        const keyboardPatterns = [
            'qwerty', 'qwertyui', 'asdf', 'asdfgh', 'zxcv', 'zxcvbn',
            '1234', '12345', '123456', '1234567', '12345678', '123456789',
            'abcd', 'abcde', 'abcdef', 'abcdefg'
        ];

        const tips = [
            "Use a mix of unrelated words with numbers and symbols for memorable strength.",
            "Consider using a passphrase like 'Coffee-Morning-2024!' instead of random characters.",
            "Password managers can generate and store complex passwords safely.",
            "Avoid using personal information like birthdays or pet names.",
            "The longer your password, the stronger it becomes against attacks."
        ];

        // =================================================================
        // DOM ELEMENTS
        // =================================================================
        const logoEl = document.getElementById('logo');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const toggleBtn = document.getElementById('togglePassword');
        const generateBtn = document.getElementById('generateBtn');
        const copyBtn = document.getElementById('copyBtn');
        const strengthLabel = document.getElementById('strengthLabel');
        const strengthFill = document.getElementById('strengthFill');
        const successMessage = document.getElementById('successMessage');
        const tipsSection = document.getElementById('tipsSection');
        const tipText = document.getElementById('tipText');
        const whyTrigger = document.getElementById('whyTrigger');
        const whyContent = document.getElementById('whyContent');
        const toast = document.getElementById('toast');

        // =================================================================
        // INITIALIZATION
        // =================================================================
        function init() {
            logoEl.src = logoSrc;
            
            // Event listeners
            passwordInput.addEventListener('input', validatePassword);
            nameInput.addEventListener('input', validatePassword);
            emailInput.addEventListener('input', validatePassword);
            toggleBtn.addEventListener('click', togglePasswordVisibility);
            generateBtn.addEventListener('click', generateStrongPassword);
            copyBtn.addEventListener('click', copyPassword);
            whyTrigger.addEventListener('click', toggleWhySection);

            // Initial validation
            validatePassword();
        }

        // =================================================================
        // VALIDATION LOGIC
        // =================================================================
        function validatePassword() {
            const password = passwordInput.value;
            const name = nameInput.value.toLowerCase().trim();
            const email = emailInput.value.toLowerCase().trim();

            const requirements = {
                length: password.length >= 12,
                lowercase: /[a-z]/.test(password),
                uppercase: /[A-Z]/.test(password),
                number: /\d/.test(password),
                symbol: /[!@#$%^&*()_+\-=\[\]{}|;:'",.<>/?]/.test(password),
                spaces: !/\s/.test(password),
                common: !isCommonOrPattern(password),
                personal: !containsPersonalInfo(password, name, email),
                repeated: !hasRepeatedChars(password)
            };

            updateChecklist(requirements);
            const score = calculateStrength(password, requirements);
            updateStrengthMeter(score);
            updateTips(score, requirements);
        }

        function updateChecklist(requirements) {
            Object.keys(requirements).forEach(req => {
                const element = document.getElementById(`req-${req}`);
                if (element) {
                    element.classList.toggle('met', requirements[req]);
                }
            });
        }

        function calculateStrength(password, requirements) {
            if (!password) return 0;

            let score = 0;
            
            // Length scoring (0-40 points)
            if (password.length >= 12) score += 15;
            if (password.length >= 16) score += 10;
            if (password.length >= 20) score += 15;

            // Character diversity (0-30 points)
            if (requirements.lowercase) score += 5;
            if (requirements.uppercase) score += 5;
            if (requirements.number) score += 5;
            if (requirements.symbol) score += 15;

            // Security checks (0-30 points)
            if (requirements.spaces) score += 5;
            if (requirements.common) score += 10;
            if (requirements.personal) score += 5;
            if (requirements.repeated) score += 10;

            return Math.min(100, score);
        }

        function updateStrengthMeter(score) {
            let label, className;

            if (score < 40) {
                label = "Weak";
                className = "strength-weak";
            } else if (score < 60) {
                label = "Fair";
                className = "strength-fair";
            } else if (score < 80) {
                label = "Good";
                className = "strength-good";
            } else {
                label = "Strong";
                className = "strength-strong";
            }

            strengthLabel.textContent = `Password Strength: ${label} (${score}/100)`;
            strengthFill.style.width = `${score}%`;
            strengthFill.className = `strength-fill ${className}`;

            // Show/hide success message
            if (score >= 80) {
                successMessage.classList.add('show');
                tipsSection.style.display = 'none';
            } else {
                successMessage.classList.remove('show');
                tipsSection.style.display = 'block';
            }
        }

        function updateTips(score, requirements) {
            if (score >= 80) return;

            let tip = tips[Math.floor(Math.random() * tips.length)];
            
            // Provide specific guidance based on missing requirements
            if (!requirements.length) {
                tip = "Your password needs to be at least 12 characters long for better security.";
            } else if (!requirements.symbol) {
                tip = "Add a symbol like ! or % to make your password much stronger.";
            } else if (!requirements.uppercase || !requirements.lowercase) {
                tip = "Mix uppercase and lowercase letters to increase complexity.";
            } else if (!requirements.number) {
                tip = "Include at least one number to strengthen your password.";
            }

            tipText.textContent = tip;
        }

        // =================================================================
        // VALIDATION HELPERS
        // =================================================================
        function isCommonOrPattern(password) {
            const lower = password.toLowerCase();
            
            // Check common passwords
            if (commonPasswords.includes(lower)) return true;
            
            // Check keyboard patterns
            for (const pattern of keyboardPatterns) {
                if (lower.includes(pattern)) return true;
            }
            
            return false;
        }

        function containsPersonalInfo(password, name, email) {
            if (!name && !email) return false;
            
            const lower = password.toLowerCase();
            
            if (name && name.length >= 3 && lower.includes(name)) return true;
            if (email && email.length >= 3) {
                const emailPart = email.split('@')[0];
                if (emailPart.length >= 3 && lower.includes(emailPart)) return true;
            }
            
            return false;
        }

        function hasRepeatedChars(password) {
            for (let i = 0; i <= password.length - 4; i++) {
                const char = password[i];
                if (password.slice(i, i + 4) === char.repeat(4)) {
                    return true;
                }
            }
            return false;
        }

        // =================================================================
        // PASSWORD GENERATOR
        // =================================================================
        function generateStrongPassword() {
            const lowercase = 'abcdefghijkmnopqrstuvwxyz'; // Removed confusing chars
            const uppercase = 'ABCDEFGHJKLMNPQRSTUVWXYZ'; // Removed confusing chars
            const numbers = '23456789'; // Removed 0 and 1
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?'; // Removed confusing quotes

            const allChars = lowercase + uppercase + numbers + symbols;
            const length = 16 + Math.floor(Math.random() * 5); // 16-20 chars

            let password = '';
            
            // Ensure at least one of each type
            password += getRandomChar(lowercase);
            password += getRandomChar(uppercase);
            password += getRandomChar(numbers);
            password += getRandomChar(symbols);

            // Fill the rest randomly
            for (let i = 4; i < length; i++) {
                password += getRandomChar(allChars);
            }

            // Shuffle the password
            password = shuffleString(password);

            // Make sure it's not common or pattern (very unlikely but check anyway)
            if (isCommonOrPattern(password)) {
                return generateStrongPassword(); // Recursively try again
            }

            passwordInput.value = password;
            validatePassword();
        }

        function getRandomChar(chars) {
            return chars[Math.floor(Math.random() * chars.length)];
        }

        function shuffleString(str) {
            return str.split('').sort(() => Math.random() - 0.5).join('');
        }

        // =================================================================
        // UI INTERACTIONS
        // =================================================================
        function togglePasswordVisibility() {
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
            toggleBtn.textContent = type === 'password' ? 'Show' : 'Hide';
        }

        function copyPassword() {
            const password = passwordInput.value;
            if (!password) {
                showToast("No password to copy");
                return;
            }

            navigator.clipboard.writeText(password).then(() => {
                showToast("Copied");
            }).catch(() => {
                // Fallback for older browsers
                passwordInput.select();
                passwordInput.setSelectionRange(0, 99999);
                try {
                    document.execCommand('copy');
                    showToast("Copied");
                } catch {
                    showToast("Couldn't copy—select and press Ctrl/Cmd+C");
                }
            });
        }

        function toggleWhySection() {
            const isOpen = whyContent.classList.contains('show');
            whyContent.classList.toggle('show');
            whyTrigger.textContent = isOpen ? 'Why this matters ▼' : 'Why this matters ▲';
        }

        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // =================================================================
        // INITIALIZATION
        // =================================================================
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
